http://os.mbed.com/users/MultipleMonomials/code/AccurateWaiter/#85e56bb98f6e969f9f47c9ce11fd20a1dc0235c0